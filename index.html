<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nirvaan • Task Dashboard with Google Sign-In</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/8.0/firebase.js"></script>
  <style>
    .card-shadow { box-shadow: 0 6px 18px rgba(20,23,28,0.08); }
  </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen p-6 dark:bg-slate-900 dark:text-slate-100">

  <!-- Sign-In Section -->
  <div id="authSection" class="max-w-md mx-auto mt-20 p-6 rounded-xl bg-white card-shadow dark:bg-slate-800">
    <h1 class="text-2xl font-bold mb-4 text-center">Sign In</h1>
    <button onclick="googleLogin()" class="w-full py-2 bg-red-500 text-white rounded-md">
      Sign in with Google
    </button>
  </div>

  <!-- Dashboard -->
  <div id="app" class="hidden max-w-6xl mx-auto">
    <header class="flex items-center justify-between mb-6">
      <h1 class="text-2xl font-semibold">Nirvaan • Task Dashboard</h1>
      <div class="flex items-center gap-3">
        <button id="logoutBtn" onclick="googleLogout()" class="px-3 py-1 rounded-md border text-red-500">
          Logout
        </button>
      </div>
    </header>
    <main>
      <p class="text-center text-gray-500">Welcome! Your dashboard is ready after sign in.</p>
    </main>
  </div>

  <script>
    // Your Firebase Config (replace with your own from Firebase Console)
    var config = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
      appId: "YOUR_APP_ID",
    };
    firebase.initializeApp(config);

    var provider = new firebase.auth.GoogleAuthProvider();

    // Check if user already logged in
    function checkAuth() {
      const user = localStorage.getItem("nirvaan_user");
      if (user) {
        document.getElementById("authSection").classList.add("hidden");
        document.getElementById("app").classList.remove("hidden");
      }
    }

    // Google Login
    function googleLogin() {
      firebase.auth().signInWithPopup(provider)
        .then(function(result) {
          var user = result.user;
          localStorage.setItem("nirvaan_user", JSON.stringify({
            name: user.displayName,
            email: user.email,
            photo: user.photoURL
          }));
          checkAuth();
          console.log("Signed in as:", user.displayName, user.email);
        })
        .catch(function(error) {
          console.error("Error:", error);
          alert("Login failed: " + error.message);
        });
    }

    // Google Logout
    function googleLogout() {
      firebase.auth().signOut().then(function() {
        localStorage.removeItem("nirvaan_user");
        location.reload();
      });
    }

    checkAuth();
  </script>
</body>
</html>
